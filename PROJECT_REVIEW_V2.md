# ShelfHelp AI - Project Review & Reworked Plan (V2)

**Generated by:** Gemini
**Date:** 2025-07-18
**Version:** 2.1

## Introduction

This document outlines a complete overhaul of the ShelfHelp AI project's development and task management workflow. It replaces all previous planning documents (`Task_Management_Guide.md`, `Session_Workflow_Protocol.md`) with a single, granular, and interactive master plan.

The previous workflow was insufficient as it relied on the AI assistant to interpret high-level goals, leading to inconsistent execution. This new plan is designed to be **explicit, sequential, and verifiable**, ensuring the user maintains precise control over the development process at every step.

The plan is divided into four parts as requested:
1.  **The New Project Management Protocol**
2.  **The Reworked Implementation Plan**
3.  **Documentation & Project Cleanup Plan**
4.  **Initiating the New Workflow**

---

## Part 1: The New Project Management Protocol

This section defines the new, mandatory workflow for all development sessions.

### 1.1 Core Principles

*   **User-Driven Control:** The user initiates every action with a specific command. The AI assistant does not act on its own initiative.
*   **Atomicity:** Each command represents a single, small, logical action (e.g., read one file, run one test, replace one block of code).
*   **Verifiability:** After each action, the system's state is verified (e.g., by running tests, checking file contents).
*   **Self-Documentation:** The process of following the plan inherently documents the work being done. The `Task_Management_Guide.md` will be updated in real-time to reflect the status of each granular step.

### 1.2 The `--uc` Flag

All SuperClaude (`/sc:`) commands in this plan will include the `--uc` flag. This flag signifies **"User Confirmation"** and serves as a mandatory guardrail. It instructs the AI that the command is part of this controlled workflow and that it must **halt and await the next user-provided command** after execution is complete.

### 1.3 Session Management

Sessions are managed explicitly by the user.

*   **Session Start:**
    *   The user initiates a session with the command: `/session:start --task-id [TASK_ID]`
    *   The AI will locate the `[TASK_ID]` in the `Task_Management_Guide.md`, display its description and the first implementation step, and await the user's command.

*   **Session End:**
    *   The user concludes a session with the command: `/session:end`
    *   The AI will prompt the user to commit any uncommitted changes and will provide a summary of the steps completed during the session.

### 1.4 The New `Task_Management_Guide.md`

The existing `Task_Management_Guide.md` will be replaced with a new version. This new guide will be the heart of the project management system. Each task will be a "Task Control Block" with the following structure:

*   **Task ID:** A unique identifier (e.g., `P2-R1-001` for "Phase 2, Rework 1, Task 1" to tackle the project management rework. Tasks related to the actual project will follow `P2-B1-001` for "Phase 2, Batch 1, Task 1").
*   **Description:** A brief explanation of the task's goal.
*   **Status:** `üìã PLANNED`, `üîÑ IN PROGRESS`, `‚úÖ COMPLETED`, `‚è≥ BLOCKED`.
*   **Prerequisites:** A list of Task IDs that must be completed first.
*   **Success Criteria:** A clear, verifiable definition of "done".
*   **Implementation Steps:** A numbered list of the exact `/sc:command --uc` prompts required to complete the task.
*   **Verification Steps:** Specific commands to validate the implementation.
*   **Completion Protocol:** Commands to update documentation, commit changes to Git, and mark the task as complete.

---

## Part 2: The Reworked Implementation Plan

This section contains the new, granular plan to replace the old `Task_Management_Guide.md`. We will begin with a new "Rework" phase to address the most critical issues first.

**Action:** The first step in our new process is to replace the content of `docs/workflows/Task_Management_Guide.md` with the plan below.

**Your Command:**

```
/sc:write --file-path "docs/workflows/Task_Management_Guide.md" --content '''# ShelfHelp AI - Master Task Management Guide (V2)

**Version:** 2.0

This guide contains the granular, step-by-step implementation plan for the ShelfHelp AI project. Follow the steps for each task sequentially.

---

## Phase 2: Rework & Refactoring

### Batch 1: Workflow & API Overhaul

**Task ID:** P2-R1-001
**Description:** Fix the 4 failing validation tests in the integration test suite to establish a stable baseline.
**Status:** üìã PLANNED
**Prerequisites:** None
**Success Criteria:** The command `npm test tests/integration/validation.test.js` runs successfully with all 13 tests passing.

**Implementation Steps:**
1.  `/sc:run --command "npm test tests/integration/validation.test.js" --uc`
2.  `/sc:read --file-path "tests/integration/validation.test.js" --uc`
3.  `/sc:read --file-path "src/core/validation/KindleUnlimitedValidator.js" --uc`
4.  `/sc:replace --file-path "src/core/validation/KindleUnlimitedValidator.js" --old-string "..." --new-string "..." --uc`

**Verification Steps:**
1.  `/sc:run --command "npm test tests/integration/validation.test.js" --uc`

**Completion Protocol:**
1.  `/sc:replace --file-path "docs/workflows/Task_Management_Guide.md" --old-string "P2-R1-001: ... üìã PLANNED" --new-string "P2-R1-001: ... ‚úÖ COMPLETED" --uc`
2.  `/sc:run --command "git add . && git commit -m 'fix(validation): Resolve 4 failing tests in KindleUnlimitedValidator' && git push" --uc`

---

**Task ID:** P2-R1-002
**Description:** Refactor the monolithic `scripts/core/api-server.js` by moving the remaining `/api/recommendations/discover` endpoint to a new modular route, and then delete the old file.
**Status:** üìã PLANNED
**Prerequisites:** P2-R1-001
**Success Criteria:** The file `scripts/core/api-server.js` is deleted. The recommendations endpoint is functional at `scripts/core/routes/recommendations.js`. All API tests pass.

**Implementation Steps:**
1.  `/sc:read --file-path "scripts/core/api-server.js" --uc`
2.  `/sc:write --file-path "scripts/core/routes/recommendations.js" --content "..." --uc`
3.  `/sc:read --file-path "scripts/core/app.js" --uc`
4.  `/sc:replace --file-path "scripts/core/app.js" --old-string "..." --new-string "..." --uc`
5.  `/sc:delete --path "scripts/core/api-server.js" --uc`

**Verification Steps:**
1.  `/sc:run --command "npm run test:api" --uc`

**Completion Protocol:**
1.  `/sc:replace --file-path "docs/workflows/Task_Management_Guide.md" --old-string "P2-R1-002: ... üìã PLANNED" --new-string "P2-R1-002: ... ‚úÖ COMPLETED" --uc`
2.  `/sc:run --command "git add . && git commit -m 'refactor(api): Modularize recommendations endpoint and remove old server file' && git push" --uc`
''' --uc
```

---

## Part 3: Documentation & Project Cleanup Plan

This plan will bring all project documentation and file structures into alignment with the new, clean, and organized standard.

**Task ID:** P2-R1-003
**Description:** Reorganize the `docs` directory into a functional structure, separating developer, AI, and project documentation.
**Status:** üìã PLANNED
**Prerequisites:** None
**Success Criteria:** The `docs` directory matches the new proposed structure. All old documentation is either moved or archived.

**Implementation Steps:**

1.  `/sc:run --command "mkdir -p docs/assistant/instructions docs/assistant/examples docs/development/architecture docs/development/guides docs/development/protocols docs/project docs/archive" --uc`
2.  `/sc:run --command "mv docs/workflows/Project_Plan.md docs/project/Project_Plan.md" --uc`
3.  `/sc:run --command "mv CLAUDE.md docs/assistant/instructions/CLAUDE.md" --uc`
4.  `/sc:run --command "mv docs/guides/Operating_Instructions.md docs/assistant/instructions/Operating_Instructions.md" --uc`
5.  `/sc:run --command "mv docs/guides/ai-classification-demo.md docs/assistant/examples/AI_Classification_Demo.md" --uc`
6.  `/sc:run --command "mv docs/CI-CD.md docs/development/guides/CI-CD.md" --uc`
7.  `/sc:run --command "mv docs/DEPLOYMENT.md docs/development/guides/Deployment.md" --uc`
8.  `/sc:run --command "mv docs/workflows/Session_Workflow_Protocol.md docs/archive/Session_Workflow_Protocol_V1.md" --uc`
9.  `/sc:run --command "mv BACKEND_AUDIT_REPORT.md docs/development/architecture/BACKEND_AUDIT_REPORT.md" --uc`
10. `/sc:run --command "rm -rf docs/workflows docs/guides" --uc`

**Verification Steps:**

1.  `/sc:run --command "ls -R docs" --uc`

**Completion Protocol:**

1.  `/sc:replace --file-path "docs/project/Task_Management_Guide.md" --old-string "P2-R1-003: ... üìã PLANNED" --new-string "P2-R1-003: ... ‚úÖ COMPLETED" --uc`
2.  `/sc:run --command "git add . && git commit -m 'docs(organization): Restructure docs directory for clarity' && git push" --uc`

---

## Part 4: Initiating the New Workflow

To begin, you will execute the commands that set up the new workflow. After this, you will manage the project by following the steps in the new `Task_Management_Guide.md`.

**Your First Commands:**

1.  **Replace the Task Management Guide:**
    *   Execute the `/sc:write` command provided at the beginning of **Part 2** to create the new `Task_Management_Guide.md`.

2.  **Start the First Task:**
    *   Issue the command: `/session:start --task-id P2-R1-001`
    *   The AI will respond with the first step for that task. You can then proceed by issuing the commands from the implementation plan one by one.

This concludes the reworked project plan. Executing these initial steps will establish the new, rigorous, and controlled development workflow you require.